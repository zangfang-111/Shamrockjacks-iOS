angular.module("starter").factory("Facebook",function($cacheFactory,$pwaRequest,Url){var factory={value_id:null,token:null,username:null,page_urls:[],displayed_per_page:22,cache:$cacheFactory("facebook"),host:"https://graph.facebook.com/v2.7/",host_img:"https://graph.facebook.com/v2.7/"};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.preFetch=function(){factory.loadData().then(function(){factory.findUser().then(function(){factory.findPosts()})})},factory.getPictureUrl=function(picture_id,size){return factory.host_img+picture_id+"/picture?width="+size+"&access_token="+factory.token},factory.loadData=function(refresh){return this.value_id?(Math.ceil(Date.now()/1e3)>153342e4&&console.error("Facebook API v2.7 will shutdown 5 October 2018, please upgrade to latest API Version."),$pwaRequest.get("social/mobile_facebook_list/find",{urlParams:{value_id:this.value_id,need_token:!this.token},withCredentials:!1,refresh:refresh}).then(function(response){return factory.username=response.username,response.token&&(factory.token=response.token),response})):$pwaRequest.reject("[Factory::Facebook.loadData] missing value_id")},factory.findUser=function(){var url=Url.build(factory.host+factory.username,{fields:"id,about,name,genre,cover,fan_count,likes,talking_about_count",access_token:this.token});return factory.get(url)},factory.findPosts=function(){var url=Url.build(factory.host+factory.username,{fields:"posts.fields(from,message,full_picture,picture,created_time,likes,comments,type,object_id,name,link)",access_token:factory.token});return angular.isDefined(factory.page_urls.posts)&&(url=factory.page_urls.posts),factory.get(url)},factory.findPost=function(post_id){var url=Url.build(factory.host+post_id,{fields:"from,message,description,full_picture,created_time,likes,comments,object_id,type,name,link",access_token:factory.token});return factory.get(url)},factory.findComments=function(){return factory.get(factory.page_urls.comments)},factory.get=function(url){return $pwaRequest.get(url,{withCredentials:!1})},factory}),angular.module("starter").factory("Padlock",function($pwaRequest){var factory={value_id:null,events:{}};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.onStatusChange=function(id,urls){factory.events[id]=urls},factory.flushData=function(){for(var i in factory.events)if(angular.isArray(factory.events[i]))for(var data=factory.events[i],j=0;j<data.length;j++)$pwaRequest.cache(data[j])},factory.findUnlockTypes=function(){return this.value_id?$pwaRequest.get("padlock/mobile_view/findunlocktypes",{urlParams:{value_id:this.value_id}}):$pwaRequest.reject("[Factory::Padlock.findUnlockTypes] missing value_id")},factory.find=function(){return this.value_id?$pwaRequest.get("padlock/mobile_view/find",{urlParams:{value_id:this.value_id}}):$pwaRequest.reject("[Factory::Padlock.find] missing value_id")},factory.unlockByQRCode=function(qrcode){return qrcode?$pwaRequest.post("padlock/mobile_view/unlockByQRCode",{data:{qrcode:qrcode},cache:!1}):$pwaRequest.reject("[Factory::Padlock.unlockByQRCode] missing value_id")},factory}),angular.module("starter").factory("Pages",function($pwaRequest,$rootScope,$q,$log,SB){var factory={data:null,features:[],touched:[],last_refresh:-1,refresh_interval:$rootScope.isOverview?0:300,is_refreshing:!1},_ready=!1,_ready_resolver=$q.defer();return Object.defineProperty(factory,"ready",{get:function(){return _ready?($log.info("Pages ready, resolving promise"),$q.resolve()):_ready_resolver.promise},set:function(value){!0===(_ready=!!value)&&($log.info("Pages ready, resolving promise"),_ready_resolver.resolve())}}),factory.populate=function(data){return factory.data=angular.copy(data),factory.features=angular.copy(data.pages),factory.data.pages=_.filter(data.pages,{homepage:!0}),data.hasOwnProperty("touched")&&(factory.touched=data.touched,factory.last_refresh=Math.trunc(Date.now()/1e3)),$rootScope.$broadcast(SB.EVENTS.CACHE.pagesReload),factory.ready=!0,$q.resolve(data)},factory.getActivePages=function(){return _.filter(factory.features,{is_active:!0})},factory.refresh=function(){$pwaRequest.get("front/mobile/pagesv2",{refresh:!0}).then(function(data){factory.features=angular.copy(data.pages),factory.data.pages=_.filter(data.pages,{homepage:!0})})},factory.updateTouched=function(){var deferred=$q.defer(),past_refresh=factory.last_refresh+factory.refresh_interval,now=Math.trunc(Date.now()/1e3);return!factory.is_refreshing&&past_refresh<now?(factory.is_refreshing=!0,$pwaRequest.get("front/mobile/touched",{refresh:!0}).then(function(data){var will_refresh=!1;angular.forEach(data.touched,function(feature,value_id){factory.touched.hasOwnProperty(value_id)&&(factory.touched[value_id].touched_at<feature.touched_at||feature.expires_at<now)&&(will_refresh=!0)}),factory.touched=data.touched,factory.last_refresh=now,deferred.resolve(factory.touched),will_refresh&&factory.refresh(),factory.is_refreshing=!1})):deferred.resolve(factory.touched),deferred.promise},factory.getForValueId=function(value_id){return factory.updateTouched(),factory.touched.hasOwnProperty(value_id)?factory.touched[value_id]:{touched_at:-1,expires_at:-1}},factory.getLayoutIdForValueId=function(value_id){return _.get(_.filter(factory.features,function(feature){return feature.value_id==value_id})[0],"layout_id",1)},factory.getTouchedAt=function(value_id){return factory.getForValueId(value_id).touched_at},factory.getExpiresAt=function(value_id){return factory.getForValueId(value_id).expires_at},factory.getLayoutIdForValueId=function(value_id){return _.get(_.filter(factory.features,{value_id:1*value_id})[0],"layout_id",1)},factory.getPayloadForValueId=function(value_id){return _.get(_.filter(factory.features,{value_id:1*value_id})[0],"embed_payload",!1)},factory}),angular.module("starter").factory("Tc",function($pwaRequest){var factory={id:null,extendedOptions:{}};return factory.setId=function(id){factory.id=id},factory.find=function(tc_id,refresh){return factory.id&&tc_id||$pwaRequest.reject("[Factory::Tc.find] missing factory.id or tc_id"),$pwaRequest.get("application/mobile_tc_view/find",{urlParams:{tc_id:tc_id||factory.id},refresh:refresh})},factory}),angular.module("starter").factory("Cms",function($pwaRequest){var factory={value_id:null,extendedOptions:{}};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.setExtendedOptions=function(options){factory.extendedOptions=options},factory.preFetch=function(){factory.findAll()},factory.findAll=function(page_id,refresh){return this.value_id?$pwaRequest.get("cms/mobile_page_view/findall",angular.extend({urlParams:{value_id:this.value_id,page_id:page_id},refresh:refresh},factory.extendedOptions)):$pwaRequest.reject("[Factory::Cms.findAll] missing value_id")},factory.find=function(page_id,refresh){return this.value_id?$pwaRequest.get("cms/mobile_page_view/find",{urlParams:{value_id:this.value_id,page_id:page_id},refresh:refresh}):$pwaRequest.reject("[Factory::Cms.find] missing value_id")},factory.findBlock=function(block_id,page_id,refresh){return this.value_id?$pwaRequest.get("cms/mobile_page_view/findblock",{urlParams:{block_id:block_id,page_id:page_id,value_id:this.value_id},refresh:refresh}):$pwaRequest.reject("[Factory::Cms.findBlock] missing value_id")},factory}),angular.module("starter").factory("Push",function($pwaRequest,$session,SB){var factory={value_id:null,device_type:DEVICE_TYPE,device_token:null,unread_count:0,extendedOptions:{}};return factory.setValueId=function(valueId){factory.value_id=valueId},factory.setExtendedOptions=function(options){factory.extendedOptions=options},factory.preFetch=function(page){factory.findAll()},factory.registerAndroidDevice=function(params){$pwaRequest.post("/push/android/registerdevice",{data:angular.extend(params,{device_uid:$session.getDeviceUid()}),cache:!1})},factory.registerIosDevice=function(params){$pwaRequest.post("/push/iphone/registerdevice",{data:angular.extend(params,{device_uid:$session.getDeviceUid()}),cache:!1})},factory.findAll=function(offset,refresh){return this.value_id||$pwaRequest.reject("[Factory::Push.findAll] missing value_id"),$pwaRequest.get("push/mobile_list/findall",angular.extend({urlParams:{value_id:this.value_id,device_uid:$session.getDeviceUid(),offset:offset},refresh:refresh},factory.extendedOptions))},factory.updateUnreadCount=function(){return $pwaRequest.get("push/mobile/count",{urlParams:{device_uid:$session.getDeviceUid()}})},factory.getInAppMessages=function(){return $pwaRequest.get("push/mobile/inapp",{urlParams:{device_uid:$session.getDeviceUid()}})},factory.getLastMessages=function(cache){var localCache=void 0===cache||cache;return $pwaRequest.get("push/mobile/lastmessages",{urlParams:{device_uid:$session.getDeviceUid()},refresh:!0,cache:localCache})},factory.markInAppAsRead=function(){return $pwaRequest.get("push/mobile/readinapp",{urlParams:{device_uid:$session.getDeviceUid(),device_type:factory.device_type},cache:!1})},factory.markAsDisplayed=function(messageId){var url="";switch(factory.device_type){case SB.DEVICE.TYPE_ANDROID:url="push/android/markdisplayed";break;case SB.DEVICE.TYPE_IOS:url="push/iphone/markdisplayed";break;default:return $pwaRequest.reject()}return $pwaRequest.get(url,{data:{device_uid:$session.getDeviceUid(),message_id:messageId},cache:!1})},factory}),angular.module("starter").controller("PushController",function($location,$rootScope,$scope,$stateParams,LinkService,SB,Push){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,collection:[],toggle_text:!1,card_design:!1,load_more:!1,use_pull_refresh:!0}),Push.setValueId($stateParams.value_id),$scope.loadContent=function(loadMore){var offset=$scope.collection.length;Push.findAll(offset).then(function(data){data.collection&&($scope.collection=$scope.collection.concat(data.collection),$rootScope.$broadcast(SB.EVENTS.PUSH.readPush)),$scope.page_title=data.page_title,$scope.load_more=data.collection.length>=data.displayed_per_page}).then(function(){loadMore&&$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.is_loading=!1})},$scope.pullToRefresh=function(){$scope.pull_to_refresh=!0,$scope.load_more=!1,Push.findAll(0,!0).then(function(data){data.collection&&($scope.collection=data.collection,$rootScope.$broadcast(SB.EVENTS.PUSH.readPush)),$scope.load_more=data.collection.length>=data.displayed_per_page}).then(function(){$scope.$broadcast("scroll.refreshComplete"),$scope.pull_to_refresh=!1})},$scope.showItem=function(item){if(item.url){if($rootScope.isNotAvailableOffline())return;LinkService.openLink(item.url)}else item.action_value?$location.path(item.action_value):$scope.toggle_text=!$scope.toggle_text},$scope.loadMore=function(){$scope.loadContent(!0)},$scope.loadContent()}),angular.module("starter").factory("Search",function($pwaRequest){var factory={url:null,agent:null,extendedOptions:{}};return factory.setAgent=function(agent,valueId){agent.value_id=valueId,factory.agent=agent,factory.find=agent.find},factory.findAll=function(parameters){return this.url&&this.agent?$pwaRequest.post(factory.url,{urlParams:{value_id:parameters.value_id},data:parameters,cache:!1,refresh:!0}):$pwaRequest.reject("[Factory::Search.findAll] missing url and agent")},factory}),angular.module("starter").controller("CustomerController",function($cordovaCamera,$ionicActionSheet,Loader,$ionicPopup,$ionicScrollDelegate,$rootScope,$scope,$timeout,$translate,Application,Customer,Dialog,FacebookConnect,HomepageLayout){angular.extend($scope,{customer:Customer.customer,card:{},is_logged_in:Customer.isLoggedIn(),app_name:Application.app_name,display_login_form:!$scope.is_logged_in&&!Customer.display_account_form,display_account_form:$scope.is_logged_in||Customer.display_account_form,can_connect_with_facebook:!!Customer.can_connect_with_facebook,page_title:$translate.instant("My account"),show_avatar:!0,avatar_loaded:!1,privacy_policy:Application.privacy_policy}),$scope.login=function(){Customer.loginModal($scope)},$scope.loginWithFacebook=function(){$rootScope.isNotAvailableInOverview()||FacebookConnect.login()},$scope.hideAvatar=function(){$scope.show_avatar=!1},$scope.avatarLoaded=function(){$scope.avatar_loaded=!0,$scope.show_avatar=!0},$scope.editAvatar=function(){var buttons=[{text:$translate.instant("Edit")}];if(null!==$scope.customer.avatar){var text="Cancel "+($scope.customer.delete_avatar?"delete":"edit");buttons.push({text:$translate.instant(text)})}else $scope.customer.is_custom_image&&buttons.push({text:$translate.instant("Delete")});var hideSheet=$ionicActionSheet.show({buttons:buttons,cancelText:$translate.instant("Cancel"),cancel:function(){hideSheet()},buttonClicked:function(index){return 0==index&&$timeout($scope.takePicture,600),1==index&&(null!=$scope.customer.avatar?($scope.customer.avatar=null,$scope.customer.delete_avatar=!1,$scope.avatar_url=Customer.getAvatarUrl($scope.customer.id)):($scope.customer.avatar=!1,$scope.customer.delete_avatar=!0,$scope.avatar_url=Customer.getAvatarUrl($scope.customer.id,{ignore_stored:!0}))),!0}})},$scope.takePicture=function(field){var gotImage=function(image_url){$scope.cropModal={original:image_url,result:null},$scope.popupShowing=!1,$ionicPopup.show({template:'<div style="position: absolute" class="cropper"><img-crop ng-if="popupShowing" image="cropModal.original" result-image="cropModal.result" area-type="square" result-image-size="256" result-image-format="image/jpeg" result-image-quality="0.9"></img-crop></div>',cssClass:"avatar-crop",scope:$scope,buttons:[{text:$translate.instant("Cancel"),type:"button-default",onTap:function(e){return!1}},{text:$translate.instant("OK"),type:"button-positive",onTap:function(e){return!0}}]}).then(function(result){result&&($scope.cropModalCtrl=null,$scope.avatar_url=$scope.cropModal.result,$scope.customer.avatar=$scope.cropModal.result,$scope.customer.delete_avatar=!1)}),$scope.popupShowing=!0},gotError=function(err){};if(Application.is_webview){var input=angular.element("<input type='file' accept='image/*'>"),selectedFile=function(evt){var file=evt.currentTarget.files[0],reader=new FileReader;reader.onload=function(evt){gotImage(evt.target.result),input.off("change",selectedFile)},reader.onerror=gotError,reader.readAsDataURL(file)};input.on("change",selectedFile),input[0].click()}else var source_type=Camera.PictureSourceType.CAMERA,hideSheet=$ionicActionSheet.show({buttons:[{text:$translate.instant("Take a picture")},{text:$translate.instant("Import from Library")}],cancelText:$translate.instant("Cancel"),cancel:function(){hideSheet()},buttonClicked:function(index){0==index&&(source_type=Camera.PictureSourceType.CAMERA),1==index&&(source_type=Camera.PictureSourceType.PHOTOLIBRARY);var options={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:source_type,encodingType:Camera.EncodingType.JPEG,targetWidth:256,targetHeight:256,correctOrientation:!0,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};return $cordovaCamera.getPicture(options).then(function(imageData){gotImage("data:image/jpeg;base64,"+imageData)},gotError),!0}})},$scope.loadContent=function(){if($scope.is_logged_in)return $scope.displayAccountForm(),Loader.show(),$scope.customer=Customer.customer,$scope.customer.metadatas=_.isObject($scope.customer.metadatas)?$scope.customer.metadatas:{},$scope.avatar_url=Customer.getAvatarUrl($scope.customer.id),HomepageLayout.getActiveOptions().then(function(options){$scope.optional_fields={ranking:!!_.find(options,{use_ranking:"1"}),nickname:!!_.find(options,{use_nickname:"1"})},$scope.custom_fields=[],_.forEach(options,function(opt){var fields=_.get(opt,"custom_fields");_.isArray(fields)&&fields.length>0&&($scope.custom_fields.push(_.pick(opt,["name","code","custom_fields"])),_.forEach(fields,function(field){var mpath=opt.code+"."+field.key;_.set($scope.customer.metadatas,mpath,_.get($scope.customer.metadatas,mpath,field.default||null))}))}),Loader.hide()})},$scope.save=function(){$scope.is_loading=!0,Loader.show(),Customer.save($scope.customer).then(function(data){return angular.isDefined(data.message)&&Dialog.alert("",data.message,"OK",-1).then(function(){Customer.login_modal.hide()}),data},function(data){return data&&angular.isDefined(data.message)&&Dialog.alert("Error",data.message,"OK",-1),data}).then(function(){$scope.is_loading=!1,Loader.hide()})},$scope.logout=function(){Customer.logout().then(function(data){FacebookConnect.logout(),data.success&&Customer.hideModal()})},$scope.displayLoginForm=function(){$scope.display_forgot_password_form=!1,$scope.display_account_form=!1,$scope.display_privacy_policy=!1,$scope.display_login_form=!0},$rootScope.$on("displayLogin",function(){$scope.displayLoginForm()}),$scope.displayForgotPasswordForm=function(){$scope.display_login_form=!1,$scope.display_account_form=!1,$scope.display_privacy_policy=!1,$scope.display_forgot_password_form=!0},$scope.displayAccountForm=function(){$scope.display_login_form=!1,$scope.display_forgot_password_form=!1,$scope.display_privacy_policy=!1,$scope.display_account_form=!0},$scope.displayPrivacyPolicy=function(from){$scope.displayed_from=from||"",$scope.display_login_form=!1,$scope.display_forgot_password_form=!1,$scope.display_account_form=!1,$scope.display_privacy_policy=!0},$scope.scrollTop=function(){$ionicScrollDelegate.scrollTop(!1)},$scope.unloadcard=function(){Dialog.confirm("Confirmation","Do you confirm you want to remove your card?").then(function(result){result&&($scope.is_loading=!0,Loader.show(),Customer.removeCard().then(function(data){$scope.card={},$scope.customer.stripe={}},function(data){data&&angular.isDefined(data.message)&&Dialog.alert("Error",data.message,"OK",-1)}).then(function(){$scope.is_loading=!1,Loader.hide()}))})},$scope.loadContent()}),angular.module("starter").factory("Customer",function($sbhttp,$pwaRequest,$rootScope,$session,$timeout,$injector,Loader,Modal,Dialog,Url,SB){var factory={events:[],customer:null,modal:null,login_modal:null,can_access_locked_features:!1,display_account_form:!1,login_modal_hidden_subscriber:null,is_logged_in:!1,facebook_login_enabled:!1,loginScope:null};return factory.populate=function(customer){factory.customer=customer,factory.is_logged_in=customer.is_logged_in,factory.id=customer.id,factory.can_access_locked_features=customer.can_access_locked_features,factory.can_connect_with_facebook=customer.can_connect_with_facebook,factory.is_logged_in&&$rootScope.$broadcast(SB.EVENTS.AUTH.loginSuccess),factory.saveCredentials(customer.token)},factory.setFacebookLogin=function(facebook){factory.facebook_login_enabled=!(null===facebook.id||""===facebook.id)},factory.onStatusChange=function(id,urls){factory.events[id]=urls},factory.hideModal=function(){factory.login_modal.hide()},factory.loginModal=function(scope,loginCallback,logoutCallback,registerCallback){if($rootScope.isNotAvailableOffline())return!1;var localScope=scope;void 0===scope&&(localScope=$rootScope),factory.loginScope=localScope,localScope.card_design=!1,localScope.$on("modal.shown",function(){var loginSuccessSubscriber=localScope.$on(SB.EVENTS.AUTH.loginSuccess,function(){"function"==typeof loginCallback&&loginCallback(),$timeout(function(){factory.login_modal.hide()},600)}),logoutSuccessSubscriber=localScope.$on(SB.EVENTS.AUTH.logoutSuccess,function(){"function"==typeof logoutCallback&&logoutCallback(),$timeout(function(){factory.login_modal.hide()},600)}),registerSubscriber=localScope.$on(SB.EVENTS.AUTH.registerSuccess,function(){"function"==typeof registerCallback&&registerCallback(),$timeout(function(){factory.login_modal.hide()},600)});factory.login_modal_hidden_subscriber=localScope.$on("modal.hidden",function(){factory.login_modal_hidden_subscriber(),loginSuccessSubscriber(),logoutSuccessSubscriber(),registerSubscriber()})});return Modal.fromTemplateUrl("templates/customer/account/l1/login.html",{scope:angular.extend(localScope,{_pcustomer_close:function(){factory.login_modal.hide()},_pcustomer_login:function(data){factory.login(data)},_pcustomer_logout:function(){factory.logout()},_pcustomer_login_fb:function(){factory.facebookConnect()},_pcustomer_check_update:function(){$rootScope.checkForUpdate()},_pcustomer_register_or_save:function(data){factory.save(data)},_pcustomer_get_avatar:function(){factory.getAvatarUrl()},_pcustomer_forgotten_password:function(email){factory.forgotPassword(email)},_pcustomer_remove_card:function(){factory.removeCard()},_facebook_enabled:factory.facebook_login_enabled}),animation:"slide-in-up"}).then(function(modal){return factory.login_modal=modal,factory.login_modal.show(),modal})},factory.login=function(data){var localData=angular.extend({},data,{device_uid:$session.getDeviceUid()});Loader.show();var promise=$pwaRequest.post("customer/mobile_account_login/post",{data:localData,cache:!1});return promise.then(function(result){return factory.populate(result.customer),result},function(error){Dialog.alert("Error",error.message,"OK",-1)}).then(function(result){return Loader.hide(),result}),promise},factory.facebookConnect=function(){if(Math.ceil(Date.now()/1e3)>153342e4&&console.error("Facebook API v2.7 will shutdown 5 October 2018, please upgrade to latest API Version."),!$rootScope.isNotAvailableInOverview()){$injector.get("FacebookConnect").login()}},factory.loginWithFacebook=function(token){var data={device_id:device.uuid,token:token},promise=$pwaRequest.post("customer/mobile_account_login/loginwithfacebook",{data:data,cache:!1});return promise.then(function(result){return factory.populate(result.customer),result},function(error){return Dialog.alert("Error",error.message,"OK",-1),error}),promise},factory.register=function(data){var localData=angular.extend({},data,{device_uid:$session.getDeviceUid()});Loader.show();var promise=$pwaRequest.post("customer/mobile_account_register/post",{data:localData,cache:!1});return promise.then(function(result){return factory.populate(result.customer),result},function(error){return Dialog.alert("Error",error.message,"OK",-1),error}).then(function(result){return Loader.hide(),result}),promise},factory.forgotPassword=function(email){try{Loader.show(),factory.forgottenpassword(email).then(function(data){data&&angular.isDefined(data.message)&&(Dialog.alert("",data.message,"OK",-1),data.success&&$rootScope.$broadcast("displayLogin"))},function(data){data&&angular.isDefined(data.message)&&Dialog.alert("Error",data.message,"OK",-1)}).then(function(){Loader.hide()})}catch(e){Loader.hide()}},factory.getAvatarUrl=function(customerId,options){var myOptions=angular.isObject(options)?options:{};return Url.get("/customer/mobile_account/avatar",angular.extend({},myOptions,{customer:customerId}))+($rootScope.isOffline?"":"?"+ +new Date)},factory.save=function(data){if(!factory.isLoggedIn())return factory.register(data);Loader.show();var promise=$pwaRequest.post("customer/mobile_account_edit/post",{data:data,cache:!1});return promise.then(function(result){return factory.populate(result.customer),result},function(error){return Dialog.alert("Error",error.message,"OK",-1),error}).then(function(result){return Loader.hide(),result}),promise},factory.forgottenpassword=function(email){Loader.show();var promise=$pwaRequest.post("customer/mobile_account_forgottenpassword/post",{data:{email:email},cache:!1});return promise.then(function(data){return Loader.hide(),data}),promise},factory.logout=function(){Loader.show();var promise=$pwaRequest.get("customer/mobile_account_login/logout",{cache:!1});return promise.then(function(result){return factory.clearCredentials(),result}).then(function(result){return Loader.hide(),result}),promise},factory.removeCard=function(){Loader.show();var promise=$pwaRequest.post("mcommerce/mobile_sales_stripe/removecard",{data:{customer_id:factory.id},cache:!1});return promise.then(function(){Loader.hide()}),promise},factory.find=function(){return $pwaRequest.get("customer/mobile_account_edit/find")},factory.isLoggedIn=function(){return factory.is_logged_in},factory.saveCredentials=function(token){$session.setId(token)},factory.clearCredentials=function(){factory.customer=null,factory.can_access_locked_features=!1,factory.is_logged_in=!1,$rootScope.$broadcast(SB.EVENTS.AUTH.logoutSuccess),$session.clear()},factory}),angular.module("starter").filter("parseUrlFilter",function(){var urlPattern=/(www|http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;return function(text,target,otherProp){return target="_blank",angular.forEach(text.match(urlPattern),function(url){var urlPos=text.indexOf(url);-1===text.substr(urlPos-6,4).indexOf("src")&&(text=text.replace(url,'<a target="'+target+'" href='+url+" style='color:#4682B4'>"+url+"</a>"))}),text}}).filter("chunk",function($log,$http){return function(items,chunk_size){var chunks=[];if(angular.isArray(items)){isNaN(chunk_size)&&(chunk_size=4);for(var i=0;i<items.length;i+=chunk_size)chunks.push(items.slice(i,i+chunk_size))}else $log.error("items is not an array: "+angular.toJson(items));return chunks}}).filter("numberFixedLen",function(){return function(n,len){var num=parseInt(n,10);if(len=parseInt(len,10),isNaN(num)||isNaN(len))return n;for(num=""+num;num.length<len;)num="0"+num;return num}}).filter("secondsToDateTime",[function(){return function(seconds){return new Date(1970,0,1).setSeconds(seconds)}}]).filter("translate",function($translate){return function(text){return $translate.instant(text)}}).filter("seconds_to_minutes",function(){return function(seconds){if(Number.isNaN(seconds))return"0:00";var s=Math.ceil(seconds);return(s-(s%=60))/60+(s>9?":":":0")+s}}).filter("trusted_html",function($sce){return function(text){return $sce.trustAsHtml(text)}}).filter("html_linky",function($sce,$filter){return function(text_or_html){return text_or_html=$filter("linky")(text_or_html),text_or_html=angular.element("<div/>").html(text_or_html).text(),text_or_html=$sce.trustAsHtml(text_or_html)}}).filter("from_now",function(){return function(date,format){return window.momentjs_loaded&&moment(date).isValid()?void 0===format?moment(date).fromNow():moment(date,format).fromNow():date}}).filter("moment_calendar",function(){return function(date,format){var now=moment();return window.momentjs_loaded&&moment(date).isValid()?moment(date).isSame(now,"day")&&moment(date).isSame(now,"hour")?void 0===format?moment(date).fromNow():moment(date,format).fromNow():moment(date).isSame(now,"day")?void 0===format?moment(date).calendar():moment(date,format).calendar():void 0===format?moment(date).format("lll"):moment(date,format).format("lll"):date}}).filter("moment",function(){return function(date){return window.momentjs_loaded?void 0===date?moment():moment(date):date}}).filter("emojify",function($sce){var EMOJIS={100:"💯",1234:"🔢",interrobang:"⁉️",tm:"™️",information_source:"ℹ️",left_right_arrow:"↔️",arrow_up_down:"↕️",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrow_lower_right:"↘️",arrow_lower_left:"↙️",keyboard:"⌨",sunny:"☀️",cloud:"☁️",umbrella:"☔️",showman:"☃",comet:"☄",ballot_box_with_check:"☑️",coffee:"☕️",shamrock:"☘",skull_and_crossbones:"☠",radioactive_sign:"☢",biohazard_sign:"☣",orthodox_cross:"☦",wheel_of_dharma:"☸",white_frowning_face:"☹",aries:"♈️",taurus:"♉️",sagittarius:"♐️",capricorn:"♑️",aquarius:"♒️",pisces:"♓️",spades:"♠️",clubs:"♣️",hearts:"♥️",diamonds:"♦️",hotsprings:"♨️",hammer_and_pick:"⚒",anchor:"⚓️",crossed_swords:"⚔",scales:"⚖",alembic:"⚗",gear:"⚙",scissors:"✂️",white_check_mark:"✅",airplane:"✈️",email:"✉️",envelope:"✉️",black_nib:"✒️",heavy_check_mark:"✔️",heavy_multiplication_x:"✖️",star_of_david:"✡",sparkles:"✨",eight_spoked_asterisk:"✳️",eight_pointed_black_star:"✴️",snowflake:"❄️",sparkle:"❇️",question:"❓",grey_question:"❔",grey_exclamation:"❕",exclamation:"❗️",heavy_exclamation_mark:"❗️",heavy_heart_exclamation_mark_ornament:"❣",heart:"❤️",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",arrow_heading_up:"⤴️",arrow_heading_down:"⤵️",wavy_dash:"〰️",congratulations:"㊗️",secret:"㊙️",copyright:"©️",registered:"®️",bangbang:"‼️",leftwards_arrow_with_hook:"↩️",arrow_right_hook:"↪️",watch:"⌚️",hourglass:"⌛️",fast_forward:"⏩",rewind:"⏪",arrow_double_up:"⏫",arrow_double_down:"⏬",black_right_pointing_double_triangle_with_vertical_bar:"⏭",black_left_pointing_double_triangle_with_vertical_bar:"⏮",black_right_pointing_triangle_with_double_vertical_bar:"⏯",alarm_clock:"⏰",stopwatch:"⏱",timer_clock:"⏲",hourglass_flowing_sand:"⏳",double_vertical_bar:"⏸",black_square_for_stop:"⏹",black_circle_for_record:"⏺",m:"Ⓜ️",black_small_square:"▪️",white_small_square:"▫️",arrow_forward:"▶️",arrow_backward:"◀️",white_medium_square:"◻️",black_medium_square:"◼️",white_medium_small_square:"◽️",black_medium_small_square:"◾️",phone:"☎️",telephone:"☎️",point_up:"☝️",star_and_crescent:"☪",peace_symbol:"☮",yin_yang:"☯",relaxed:"☺️",gemini:"♊️",cancer:"♋️",leo:"♌️",virgo:"♍️",libra:"♎️",scorpius:"♏️",recycle:"♻️",wheelchair:"♿️",atom_symbol:"⚛",fleur_de_lis:"⚜",warning:"⚠️",zap:"⚡️",white_circle:"⚪️",black_circle:"⚫️",coffin:"⚰",funeral_urn:"⚱",soccer:"⚽️",baseball:"⚾️",snowman:"⛄️",partly_sunny:"⛅️",thunder_cloud_and_rain:"⛈",ophiuchus:"⛎",pick:"⛏",helmet_with_white_cross:"⛑",chains:"⛓",no_entry:"⛔️",shinto_shrine:"⛩",church:"⛪️",mountain:"⛰",umbrella_on_ground:"⛱",fountain:"⛲️",golf:"⛳️",ferry:"⛴",boat:"⛵️",sailboat:"⛵️",skier:"⛷",ice_skate:"⛸",person_with_ball:"⛹",tent:"⛺️",fuelpump:"⛽️",fist:"✊",hand:"✋",raised_hand:"✋",v:"✌️",writing_hand:"✍",pencil2:"✏️",latin_cross:"✝",x:"❌",negative_squared_cross_mark:"❎",arrow_right:"➡️",curly_loop:"➰",loop:"➿",arrow_left:"⬅️",arrow_up:"⬆️",arrow_down:"⬇️",black_large_square:"⬛️",white_large_square:"⬜️",star:"⭐️",o:"⭕️",part_alternation_mark:"〽️",mahjong:"🀄️",black_joker:"🃏",a:"🅰️",b:"🅱️",o2:"🅾️",parking:"🅿️",ab:"🆎",cl:"🆑",cool:"🆒",free:"🆓",id:"🆔",new:"🆕",ng:"🆖",ok:"🆗",sos:"🆘",up:"🆙",vs:"🆚",koko:"🈁",sa:"🈂️",u7121:"🈚️",u6307:"🈯️",u7981:"🈲",u7a7a:"🈳",u5408:"🈴",u6e80:"🈵",u6709:"🈶",u6708:"🈷️",u7533:"🈸",u5272:"🈹",u55b6:"🈺",ideograph_advantage:"🉐",accept:"🉑",cyclone:"🌀",foggy:"🌁",closed_umbrella:"🌂",night_with_stars:"🌃",sunrise_over_mountains:"🌄",sunrise:"🌅",city_sunset:"🌆",city_sunrise:"🌇",rainbow:"🌈",bridge_at_night:"🌉",ocean:"🌊",volcano:"🌋",milky_way:"🌌",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",globe_with_meridians:"🌐",new_moon:"🌑",waxing_crescent_moon:"🌒",first_quarter_moon:"🌓",moon:"🌔",waxing_gibbous_moon:"🌔",full_moon:"🌕",waning_gibbous_moon:"🌖",last_quarter_moon:"🌗",waning_crescent_moon:"🌘",crescent_moon:"🌙",new_moon_with_face:"🌚",first_quarter_moon_with_face:"🌛",last_quarter_moon_with_face:"🌜",full_moon_with_face:"🌝",sun_with_face:"🌞",star2:"🌟",stars:"🌠",thermometer:"🌡",mostly_sunny:"🌤",sun_small_cloud:"🌤",barely_sunny:"🌥",sun_behind_cloud:"🌥",partly_sunny_rain:"🌦",sun_behind_rain_cloud:"🌦",rain_cloud:"🌧",snow_cloud:"🌨",lightning:"🌩",lightning_cloud:"🌩",tornado:"🌪",tornado_cloud:"🌪",fog:"🌫",wind_blowing_face:"🌬",hotdog:"🌭",taco:"🌮",burrito:"🌯",chestnut:"🌰",seedling:"🌱",evergreen_tree:"🌲",deciduous_tree:"🌳",palm_tree:"🌴",cactus:"🌵",hot_pepper:"🌶",tulip:"🌷",cherry_blossom:"🌸",rose:"🌹",hibiscus:"🌺",sunflower:"🌻",blossom:"🌼",corn:"🌽",ear_of_rice:"🌾",herb:"🌿",four_leaf_clover:"🍀",maple_leaf:"🍁",fallen_leaf:"🍂",leaves:"🍃",mushroom:"🍄",tomato:"🍅",eggplant:"🍆",grapes:"🍇",melon:"🍈",watermelon:"🍉",tangerine:"🍊",lemon:"🍋",banana:"🍌",pineapple:"🍍",apple:"🍎",green_apple:"🍏",pear:"🍐",peach:"🍑",cherries:"🍒",strawberry:"🍓",hamburger:"🍔",pizza:"🍕",meat_on_bone:"🍖",poultry_leg:"🍗",rice_cracker:"🍘",rice_ball:"🍙",rice:"🍚",curry:"🍛",ramen:"🍜",spaghetti:"🍝",bread:"🍞",fries:"🍟",sweet_potato:"🍠",dango:"🍡",oden:"🍢",sushi:"🍣",fried_shrimp:"🍤",fish_cake:"🍥",icecream:"🍦",shaved_ice:"🍧",ice_cream:"🍨",doughnut:"🍩",cookie:"🍪",chocolate_bar:"🍫",candy:"🍬",lollipop:"🍭",custard:"🍮",honey_pot:"🍯",cake:"🍰",bento:"🍱",stew:"🍲",egg:"🍳",fork_and_knife:"🍴",tea:"🍵",sake:"🍶",wine_glass:"🍷",cocktail:"🍸",tropical_drink:"🍹",beer:"🍺",beers:"🍻",baby_bottle:"🍼",knife_fork_plate:"🍽",champagne:"🍾",popcorn:"🍿",ribbon:"🎀",gift:"🎁",birthday:"🎂",jack_o_lantern:"🎃",christmas_tree:"🎄",santa:"🎅",fireworks:"🎆",sparkler:"🎇",balloon:"🎈",tada:"🎉",confetti_ball:"🎊",tanabata_tree:"🎋",crossed_flags:"🎌",bamboo:"🎍",dolls:"🎎",flags:"🎏",wind_chime:"🎐",rice_scene:"🎑",school_satchel:"🎒",mortar_board:"🎓",medal:"🎖",reminder_ribbon:"🎗",studio_microphone:"🎙",level_slider:"🎚",control_knobs:"🎛",film_frames:"🎞",admission_tickets:"🎟",carousel_horse:"🎠",ferris_wheel:"🎡",roller_coaster:"🎢",fishing_pole_and_fish:"🎣",microphone:"🎤",movie_camera:"🎥",cinema:"🎦",headphones:"🎧",art:"🎨",tophat:"🎩",circus_tent:"🎪",ticket:"🎫",clapper:"🎬",performing_arts:"🎭",video_game:"🎮",dart:"🎯",slot_machine:"🎰","8ball":"🎱",game_die:"🎲",bowling:"🎳",flower_playing_cards:"🎴",musical_note:"🎵",notes:"🎶",saxophone:"🎷",guitar:"🎸",musical_keyboard:"🎹",trumpet:"🎺",violin:"🎻",musical_score:"🎼",running_shirt_with_sash:"🎽",tennis:"🎾",ski:"🎿",basketball:"🏀",checkered_flag:"🏁",snowboarder:"🏂",runner:"🏃",running:"🏃",surfer:"🏄",sports_medal:"🏅",trophy:"🏆",horse_racing:"🏇",football:"🏈",rugby_football:"🏉",swimmer:"🏊",weight_lifter:"🏋",golfer:"🏌",racing_motorcycle:"🏍",racing_car:"🏎",cricket_bat_and_ball:"🏏",volleyball:"🏐",field_hockey_stick_and_ball:"🏑",ice_hockey_stick_and_puck:"🏒",table_tennis_paddle_and_ball:"🏓",snow_capped_mountain:"🏔",camping:"🏕",beach_with_umbrella:"🏖",building_construction:"🏗",house_buildings:"🏘",cityscape:"🏙",derelict_house_building:"🏚",classical_building:"🏛",desert:"🏜",desert_island:"🏝",national_park:"🏞",stadium:"🏟",house:"🏠",house_with_garden:"🏡",office:"🏢",post_office:"🏣",european_post_office:"🏤",hospital:"🏥",bank:"🏦",atm:"🏧",hotel:"🏨",love_hotel:"🏩",convenience_store:"🏪",school:"🏫",department_store:"🏬",factory:"🏭",izakaya_lantern:"🏮",lantern:"🏮",japanese_castle:"🏯",european_castle:"🏰",waving_white_flag:"🏳",waving_black_flag:"🏴",rosette:"🏵",label:"🏷",badminton_racquet_and_shuttlecock:"🏸",bow_and_arrow:"🏹",amphora:"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿",rat:"🐀",mouse2:"🐁",ox:"🐂",water_buffalo:"🐃",cow2:"🐄",tiger2:"🐅",leopard:"🐆",rabbit2:"🐇",cat2:"🐈",dragon:"🐉",crocodile:"🐊",whale2:"🐋",snail:"🐌",snake:"🐍",racehorse:"🐎",ram:"🐏",goat:"🐐",sheep:"🐑",monkey:"🐒",rooster:"🐓",chicken:"🐔",dog2:"🐕",pig2:"🐖",boar:"🐗",elephant:"🐘",octopus:"🐙",shell:"🐚",bug:"🐛",ant:"🐜",bee:"🐝",honeybee:"🐝",beetle:"🐞",fish:"🐟",tropical_fish:"🐠",blowfish:"🐡",turtle:"🐢",hatching_chick:"🐣",baby_chick:"🐤",hatched_chick:"🐥",bird:"🐦",penguin:"🐧",koala:"🐨",poodle:"🐩",dromedary_camel:"🐪",camel:"🐫",dolphin:"🐬",flipper:"🐬",mouse:"🐭",cow:"🐮",tiger:"🐯",rabbit:"🐰",cat:"🐱",dragon_face:"🐲",whale:"🐳",horse:"🐴",monkey_face:"🐵",dog:"🐶",pig:"🐷",frog:"🐸",hamster:"🐹",wolf:"🐺",bear:"🐻",panda_face:"🐼",pig_nose:"🐽",feet:"🐾",paw_prints:"🐾",chipmunk:"🐿",eyes:"👀",eye:"👁",ear:"👂",nose:"👃",lips:"👄",tongue:"👅",point_up_2:"👆",point_down:"👇",point_left:"👈",point_right:"👉",facepunch:"👊",punch:"👊",wave:"👋",ok_hand:"👌","+1":"👍",thumbsup:"👍","-1":"👎",thumbsdown:"👎",clap:"👏",open_hands:"👐",crown:"👑",womans_hat:"👒",eyeglasses:"👓",necktie:"👔",shirt:"👕",tshirt:"👕",jeans:"👖",dress:"👗",kimono:"👘",bikini:"👙",womans_clothes:"👚",purse:"👛",handbag:"👜",pouch:"👝",mans_shoe:"👞",shoe:"👞",athletic_shoe:"👟",high_heel:"👠",sandal:"👡",boot:"👢",footprints:"👣",bust_in_silhouette:"👤",busts_in_silhouette:"👥",boy:"👦",girl:"👧",man:"👨",woman:"👩",family:"👨‍👩‍👦","man-woman-boy":"👨‍👩‍👦",couple:"👫",man_and_woman_holding_hands:"👫",two_men_holding_hands:"👬",two_women_holding_hands:"👭",cop:"👮",dancers:"👯",bride_with_veil:"👰",person_with_blond_hair:"👱",man_with_gua_pi_mao:"👲",man_with_turban:"👳",older_man:"👴",older_woman:"👵",baby:"👶",construction_worker:"👷",princess:"👸",japanese_ogre:"👹",japanese_goblin:"👺",ghost:"👻",angel:"👼",alien:"👽",space_invader:"👾",imp:"👿",skull:"💀",information_desk_person:"💁",guardsman:"💂",dancer:"💃",lipstick:"💄",nail_care:"💅",massage:"💆",haircut:"💇",barber:"💈",syringe:"💉",pill:"💊",kiss:"💋",love_letter:"💌",ring:"💍",gem:"💎",couplekiss:"💏",bouquet:"💐",couple_with_heart:"💑",wedding:"💒",heartbeat:"💓",broken_heart:"💔",two_hearts:"💕",sparkling_heart:"💖",heartpulse:"💗",cupid:"💘",blue_heart:"💙",green_heart:"💚",yellow_heart:"💛",purple_heart:"💜",gift_heart:"💝",revolving_hearts:"💞",heart_decoration:"💟",diamond_shape_with_a_dot_inside:"💠",bulb:"💡",anger:"💢",bomb:"💣",zzz:"💤",boom:"💥",collision:"💥",sweat_drops:"💦",droplet:"💧",dash:"💨",hankey:"💩",poop:"💩",shit:"💩",muscle:"💪",dizzy:"💫",speech_balloon:"💬",thought_balloon:"💭",white_flower:"💮",moneybag:"💰",currency_exchange:"💱",heavy_dollar_sign:"💲",credit_card:"💳",yen:"💴",dollar:"💵",euro:"💶",pound:"💷",money_with_wings:"💸",chart:"💹",seat:"💺",computer:"💻",briefcase:"💼",minidisc:"💽",floppy_disk:"💾",cd:"💿",dvd:"📀",file_folder:"📁",open_file_folder:"📂",page_with_curl:"📃",page_facing_up:"📄",date:"📅",calendar:"📆",card_index:"📇",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",bar_chart:"📊",clipboard:"📋",pushpin:"📌",round_pushpin:"📍",paperclip:"📎",straight_ruler:"📏",triangular_ruler:"📐",bookmark_tabs:"📑",ledger:"📒",notebook:"📓",notebook_with_decorative_cover:"📔",closed_book:"📕",book:"📖",open_book:"📖",green_book:"📗",blue_book:"📘",orange_book:"📙",books:"📚",name_badge:"📛",scroll:"📜",memo:"📝",pencil:"📝",telephone_receiver:"📞",pager:"📟",fax:"📠",satellite:"🛰",loudspeaker:"📢",mega:"📣",outbox_tray:"📤",inbox_tray:"📥",package:"📦","e-mail":"📧",incoming_envelope:"📨",envelope_with_arrow:"📩",mailbox_closed:"📪",mailbox:"📫",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",postbox:"📮",postal_horn:"📯",newspaper:"📰",iphone:"📱",calling:"📲",vibration_mode:"📳",mobile_phone_off:"📴",no_mobile_phones:"📵",signal_strength:"📶",camera:"📷",camera_with_flash:"📸",video_camera:"📹",tv:"📺",radio:"📻",vhs:"📼",film_projector:"📽",prayer_beads:"📿",twisted_rightwards_arrows:"🔀",repeat:"🔁",repeat_one:"🔂",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",low_brightness:"🔅",high_brightness:"🔆",mute:"🔇",speaker:"🔈",sound:"🔉",loud_sound:"🔊",battery:"🔋",electric_plug:"🔌",mag:"🔍",mag_right:"🔎",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",key:"🔑",lock:"🔒",unlock:"🔓",bell:"🔔",no_bell:"🔕",bookmark:"🔖",link:"🔗",radio_button:"🔘",back:"🔙",end:"🔚",on:"🔛",soon:"🔜",top:"🔝",underage:"🔞",keycap_ten:"🔟",capital_abcd:"🔠",abcd:"🔡",symbols:"🔣",abc:"🔤",fire:"🔥",flashlight:"🔦",wrench:"🔧",hammer:"🔨",nut_and_bolt:"🔩",hocho:"🔪",knife:"🔪",gun:"🔫",microscope:"🔬",telescope:"🔭",crystal_ball:"🔮",six_pointed_star:"🔯",beginner:"🔰",trident:"🔱",black_square_button:"🔲",white_square_button:"🔳",red_circle:"🔴",large_blue_circle:"🔵",large_orange_diamond:"🔶",large_blue_diamond:"🔷",small_orange_diamond:"🔸",small_blue_diamond:"🔹",small_red_triangle:"🔺",small_red_triangle_down:"🔻",arrow_up_small:"🔼",arrow_down_small:"🔽",om_symbol:"🕉",dove_of_peace:"🕊",kaaba:"🕋",mosque:"🕌",synagogue:"🕍",menorah_with_nine_branches:"🕎",clock1:"🕐",clock2:"🕑",clock3:"🕒",clock4:"🕓",clock5:"🕔",clock6:"🕕",clock7:"🕖",clock8:"🕗",clock9:"🕘",clock10:"🕙",clock11:"🕚",clock12:"🕛",clock130:"🕜",clock230:"🕝",clock330:"🕞",clock430:"🕟",clock530:"🕠",clock630:"🕡",clock730:"🕢",clock830:"🕣",clock930:"🕤",clock1030:"🕥",clock1130:"🕦",clock1230:"🕧",candle:"🕯",mantelpiece_clock:"🕰",hole:"🕳",man_in_business_suit_levitating:"🕴",sleuth_or_spy:"🕵",dark_sunglasses:"🕶",spider:"🕷",spider_web:"🕸",joystick:"🕹",linked_paperclips:"🖇",lower_left_ballpoint_pen:"🖊",lower_left_fountain_pen:"🖋",lower_left_paintbrush:"🖌",lower_left_crayon:"🖍",raised_hand_with_fingers_splayed:"🖐",middle_finger:"🖕",reversed_hand_with_middle_finger_extended:"🖕","spock-hand":"🖖",desktop_computer:"🖥",printer:"🖨",three_button_mouse:"🖱",trackball:"🖲",frame_with_picture:"🖼",card_index_dividers:"🗂",card_file_box:"🗃",file_cabinet:"🗄",wastebasket:"🗑",spiral_note_pad:"🗒",spiral_calendar_pad:"🗓",compression:"🗜",old_key:"🗝",rolled_up_newspaper:"🗞",dagger_knife:"🗡",speaking_head_in_silhouette:"🗣",left_speech_bubble:"🗨",right_anger_bubble:"🗯",ballot_box_with_ballot:"🗳",world_map:"🗺",mount_fuji:"🗻",tokyo_tower:"🗼",statue_of_liberty:"🗽",japan:"🗾",moyai:"🗿",grinning:"😀",grin:"😁",joy:"😂",smiley:"😃",smile:"😄",sweat_smile:"😅",laughing:"😆",satisfied:"😆",innocent:"😇",smiling_imp:"😈",wink:"😉",blush:"😊",yum:"😋",relieved:"😌",heart_eyes:"😍",sunglasses:"😎",smirk:"😏",neutral_face:"😐",expressionless:"😑",unamused:"😒",sweat:"😓",pensive:"😔",confused:"😕",confounded:"😖",kissing:"😗",kissing_heart:"😘",kissing_smiling_eyes:"😙",kissing_closed_eyes:"😚",stuck_out_tongue:"😛",stuck_out_tongue_winking_eye:"😜",stuck_out_tongue_closed_eyes:"😝",disappointed:"😞",worried:"😟",angry:"😠",rage:"😡",cry:"😢",persevere:"😣",triumph:"😤",disappointed_relieved:"😥",frowning:"😦",anguished:"😧",fearful:"😨",weary:"😩",sleepy:"😪",tired_face:"😫",grimacing:"😬",sob:"😭",open_mouth:"😮",hushed:"😯",cold_sweat:"😰",scream:"😱",astonished:"😲",flushed:"😳",sleeping:"😴",dizzy_face:"😵",no_mouth:"😶",mask:"😷",smile_cat:"😸",joy_cat:"😹",smiley_cat:"😺",heart_eyes_cat:"😻",smirk_cat:"😼",kissing_cat:"😽",pouting_cat:"😾",crying_cat_face:"😿",scream_cat:"🙀",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",upside_down_face:"🙃",face_with_rolling_eyes:"🙄",no_good:"🙅",ok_woman:"🙆",bow:"🙇",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",raising_hand:"🙋",raised_hands:"🙌",person_frowning:"🙍",person_with_pouting_face:"🙎",pray:"🙏",rocket:"🚀",helicopter:"🚁",steam_locomotive:"🚂",railway_car:"🚃",bullettrain_side:"🚄",bullettrain_front:"🚅",train2:"🚆",metro:"🚇",light_rail:"🚈",station:"🚉",tram:"🚊",train:"🚋",bus:"🚌",oncoming_bus:"🚍",trolleybus:"🚎",busstop:"🚏",minibus:"🚐",ambulance:"🚑",fire_engine:"🚒",police_car:"🚓",oncoming_police_car:"🚔",taxi:"🚕",oncoming_taxi:"🚖",car:"🚗",red_car:"🚗",oncoming_automobile:"🚘",blue_car:"🚙",truck:"🚚",articulated_lorry:"🚛",tractor:"🚜",monorail:"🚝",mountain_railway:"🚞",suspension_railway:"🚟",mountain_cableway:"🚠",aerial_tramway:"🚡",ship:"🚢",rowboat:"🚣",speedboat:"🚤",traffic_light:"🚥",vertical_traffic_light:"🚦",construction:"🚧",rotating_light:"🚨",triangular_flag_on_post:"🚩",door:"🚪",no_entry_sign:"🚫",smoking:"🚬",no_smoking:"🚭",put_litter_in_its_place:"🚮",do_not_litter:"🚯",potable_water:"🚰","non-potable_water":"🚱",bike:"🚲",no_bicycles:"🚳",bicyclist:"🚴",mountain_bicyclist:"🚵",walking:"🚶",no_pedestrians:"🚷",children_crossing:"🚸",mens:"🚹",womens:"🚺",restroom:"🚻",baby_symbol:"🚼",toilet:"🚽",wc:"🚾",shower:"🚿",bath:"🛀",bathtub:"🛁",passport_control:"🛂",customs:"🛃",baggage_claim:"🛄",left_luggage:"🛅",couch_and_lamp:"🛋",sleeping_accommodation:"🛌",shopping_bags:"🛍",bellhop_bell:"🛎",bed:"🛏",place_of_worship:"🛐",hammer_and_wrench:"🛠",shield:"🛡",oil_drum:"🛢",motorway:"🛣",railway_track:"🛤",motor_boat:"🛥",small_airplane:"🛩",airplane_departure:"🛫",airplane_arriving:"🛬",passenger_ship:"🛳",zipper_mouth_face:"🤐",money_mouth_face:"🤑",face_with_thermometer:"🤒",nerd_face:"🤓",thinking_face:"🤔",face_with_head_bandage:"🤕",robot_face:"🤖",hugging_face:"🤗",the_horns:"🤘",sign_of_the_horns:"🤘",crab:"🦀",lion_face:"🦁",scorpion:"🦂",turkey:"🦃",unicorn_face:"🦄",cheese_wedge:"🧀",hash:"#️⃣",keycap_star:"*⃣",zero:"0️⃣",one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","flag-cn":"🇨🇳",cn:"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","flag-de":"🇩🇪",de:"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","flag-es":"🇪🇸",es:"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","flag-fr":"🇫🇷",fr:"🇫🇷","flag-ga":"🇬🇦","flag-gb":"🇬🇧",gb:"🇬🇧",uk:"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","flag-it":"🇮🇹",it:"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","flag-jp":"🇯🇵",jp:"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","flag-kr":"🇰🇷",kr:"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","flag-ru":"🇷🇺",ru:"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-us":"🇺🇸",us:"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-woman":"👩‍❤️‍💋‍👩"},parser=/:([a-zA-Z0-9_\-\+]+):/g;return function(str){return str=angular.isString(str)?str:angular.isUndefined(str)||null===str?"":Object.prototype.toString(str),str=str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),$sce.trustAsHtml(str.split(parser).map(function(s,i){if(i%2==0)return s;return function(emoji){return EMOJIS.hasOwnProperty(emoji)?$sce.trustAsHtml('<span class="emoji">'+EMOJIS[emoji]+"</span>"):":"+emoji+":"}(s)}).join(""))}});