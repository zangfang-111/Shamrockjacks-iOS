angular.module("starter").controller("PadlockController",function($scope,$stateParams,$q,Customer,Dialog,Padlock,Pages){angular.extend($scope,{is_loading:!0,is_logged_in:Customer.isLoggedIn()}),Padlock.value_id=$stateParams.value_id;var padlocks=_.filter(Pages.data.pages,function(feature){return"padlock"===feature.code});if(padlocks.length>=1){var padlock=padlocks[0];padlock.value_id!==Padlock.value_id&&($stateParams.value_id=padlock.value_id,Padlock.value_id=$stateParams.value_id)}if(0!==Padlock.value_id){var promise1=Padlock.find();promise1.then(function(data){return $scope.page_title=data.page_title,$scope.description=data.description,data});var promise2=Padlock.findUnlockTypes();promise2.then(function(data){return $scope.unlock_by_account_type=!!data.unlock_by_account,$scope.unlock_by_qrcode_type=!!data.unlock_by_qrcode,data}),$q.all([promise1,promise2]).then(function(){$scope.is_loading=!1})}else Dialog.alert("Error","Unable to find any Padlock feature!","OK",-1),$scope.is_loading=!1});