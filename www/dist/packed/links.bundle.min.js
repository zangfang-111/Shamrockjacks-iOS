angular.module("starter").controller("LinksViewController",function($scope,$stateParams,$rootScope,$timeout,$window,Links,LinkService){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,weblink:{},card_design:!1}),Links.setValueId($stateParams.value_id),$scope.loadContent=function(){Links.find().then(function(data){$scope.weblink=data.weblink,angular.isArray($scope.weblink.links)||($scope.weblink.links=[]),$scope.page_title=data.page_title}).then(function(){$scope.is_loading=!1})},$scope.openLink=function(url,hide_navbar,use_external_app){LinkService.openLink(url,{hide_navbar:hide_navbar,use_external_app:use_external_app})},$rootScope.isOverview&&($window.prepareDummy=function(){$timeout(function(){$scope.dummy={id:"new"},$scope.weblink.links.push($scope.dummy)})},$window.setAttributeTo=function(id,attribute,value){$timeout(function(){for(var i in $scope.weblink.links)$scope.weblink.links[i].id==id&&($scope.weblink.links[i][attribute]=value)})},$window.setCoverUrl=function(url){$timeout(function(){$scope.weblink.cover_url=url})}),$scope.loadContent()}),angular.module("starter").factory("Links",function($pwaRequest){var factory={value_id:null,extendedOptions:{}};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.setExtendedOptions=function(options){factory.extendedOptions=options},factory.find=function(){if(!this.value_id)return $pwaRequest.reject("[Factory::Links.find] missing value_id");var payload=$pwaRequest.getPayloadForValueId(factory.value_id);return!1!==payload?$pwaRequest.resolve(payload):$pwaRequest.get("weblink/mobile_multi/find",angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))},factory});